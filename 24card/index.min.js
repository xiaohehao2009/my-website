function fn(t){t.innerHTML="请输入正确的格式！"}function fn2(t){switch(t){case"a":return 1;case"j":return 11;case"q":return 12;case"k":return 13;default:return+t}}function calc(t,n,e){switch(e){case 0:return t+n;case 1:return t*n;case 2:return t-n;case 3:return t/n}}function strop(t){switch(t){case 0:return"+";case 1:return"*";case 2:return"-";case 3:return"/"}}function allMatrixs(t){if(1===t.length)return[t];const n=[];t:for(let e=0;e<t.length;e++){for(let n=0;n<e;n++)if(t[e]===t[n])continue t;const c=[...t],r=c.splice(e,1),u=allMatrixs(c);for(const t of u)n.push([...r,...t])}return n}function calcNums([t,n,e,c],[r,u,a],s){switch(s){case 0:return calc(calc(t,n,r),calc(e,c,a),u);case 1:return calc(calc(calc(t,n,r),e,u),c,a);case 2:return calc(calc(t,calc(n,e,u),r),c,a);case 3:return calc(t,calc(calc(n,e,u),c,a),r);case 4:return calc(t,calc(n,calc(e,c,a),u),r)}}function stringify([t,n,e,c],[r,u,a],s){const o=strop(r),i=strop(u),l=strop(a);switch(s){case 0:return"("+t+o+n+")"+i+"("+e+l+c+")";case 1:return"(("+t+o+n+")"+i+e+")"+l+c;case 2:return"("+t+o+"("+n+i+e+"))"+l+c;case 3:return t+o+"(("+n+i+e+")"+l+c+")";case 4:return t+o+"("+n+i+"("+e+l+c+"))"}}function is24(t){return Math.abs(t-24)<1e-7}function calc24(t){const n=allMatrixs(t),e=new Set;for(const t of n)for(let n=0;n<64;n++)for(let c=0;c<5;c++){const r=[3&n,(12&n)>>2,n>>4],u=calcNums(t,r,c);is24(u)&&e.add(stringify(t,r,c)+" = 24")}return[...e]}const input=document.getElementById("input"),button=document.getElementById("button"),time=document.getElementById("time"),output=document.getElementById("output");button.onclick=function(){const t=input.value.trim().toLowerCase();let n;if(4===t.length){if(n=t.split("").map(fn2),n.includes(NaN))return void fn(output)}else if(n=t.split(/\s+|,/).map(fn2),n.includes(NaN)||n.some(t=>t>100||t<0)||4!==n.length)return void fn(output);const e=Date.now(),c=calc24(n),r=Date.now();time.innerHTML=(r-e)/1e3+" 秒",c.length?output.innerHTML=c.length+" 个结果<br />"+c.join("<br />"):output.innerHTML="无结果"};